import axios from "axios";
import { Exploitation } from "@/app/models/interfaces/Exploitation";

// Axios fetch api
// To use in case needed
const getExploitationsByUserUID = async (userUID: string) => {
  const response = await axios.get(
    `${process.env.NEXT_PUBLIC_API_URL}/api/exploitations?userUID=${userUID}`
  );
  console.log("response :", response);

  if (response.status === 200) {
    const exploitations: Exploitation[] = response.data;
    const exploitationOptions = exploitations.map(exploitation => ({
      id: exploitation.id,
      value: exploitation.nom,
      label: exploitation.nom,
    }));

    return exploitationOptions;
  } else {
    console.error("Failed to fetch exploitations: ", response.status);
  }
};

export default getExploitationsByUserUID;
